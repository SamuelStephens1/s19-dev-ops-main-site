---
import { getEntry, render } from 'astro:content';

// For `[...slug].astro`, params.slug is string | string[]
const param = Astro.params.slug;
const id = Array.isArray(param) ? param.join('/') : param; // collection id

if (!id) {
  throw new Error('Missing slug');
}

const entry = await getEntry('blog', id);
if (!entry) {
  throw new Error(`Blog post not found for id: ${id}`);
}

// v5: use render(entry) to get <Content />
const { Content } = await render(entry);
---
<article>
  <h1>{entry.data.title}</h1>
  <p><em>{entry.data.description}</em></p>
  <Content />
</article>
