---
import { getEntry, render } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';

// Get slug param safely
const slugParam = Astro.params.slug;
const slug = Array.isArray(slugParam) ? slugParam.join('/') : slugParam;
if (!slug) return new Response("Not found", { status: 404 });

// Fetch resource entry
const entry = await getEntry('resources', slug);
if (!entry) return new Response("Not found", { status: 404 });

// Render the content slot
const { Content } = await render(entry);
const { title, description, pubDate, author, tags, heroImage } = entry.data;
---

<BlogPost
  title={title}
  description={description}
  pubDate={pubDate}
  author={author}
  tags={tags}
  heroImage={heroImage}
>
  <Content />
</BlogPost>
